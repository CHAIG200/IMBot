/*
 ________      ___      ________       ________      ________      ________      ________                                  
|\   ___ \    |\  \    |\   ____\     |\   ____\    |\   __  \    |\   __  \    |\   ___ \                                 
\ \  \_|\ \   \ \  \   \ \  \___|_    \ \  \___|    \ \  \|\  \   \ \  \|\  \   \ \  \_|\ \                                
 \ \  \ \\ \   \ \  \   \ \_____  \    \ \  \        \ \  \\\  \   \ \   _  _\   \ \  \ \\ \                               
  \ \  \_\\ \   \ \  \   \|____|\  \    \ \  \____    \ \  \\\  \   \ \  \\  \|   \ \  \_\\ \                              
   \ \_______\   \ \__\    ____\_\  \    \ \_______\   \ \_______\   \ \__\\ _\    \ \_______\                             
    \|_______|    \|__|   |\_________\    \|_______|    \|_______|    \|__|\|__|    \|_______|                             
                          \|_________|                                                                                                                                                                                                                                                                                                                     
 ___  ___      ________      ________      ___  __            ___       __       _______       _______       ___  __       
|\  \|\  \    |\   __  \    |\   ____\    |\  \|\  \         |\  \     |\  \    |\  ___ \     |\  ___ \     |\  \|\  \     
\ \  \\\  \   \ \  \|\  \   \ \  \___|    \ \  \/  /|_       \ \  \    \ \  \   \ \   __/|    \ \   __/|    \ \  \/  /|_   
 \ \   __  \   \ \   __  \   \ \  \        \ \   ___  \       \ \  \  __\ \  \   \ \  \_|/__   \ \  \_|/__   \ \   ___  \  
  \ \  \ \  \   \ \  \ \  \   \ \  \____    \ \  \\ \  \       \ \  \|\__\_\  \   \ \  \_|\ \   \ \  \_|\ \   \ \  \\ \  \ 
   \ \__\ \__\   \ \__\ \__\   \ \_______\   \ \__\\ \__\       \ \____________\   \ \_______\   \ \_______\   \ \__\\ \__\
    \|__|\|__|    \|__|\|__|    \|_______|    \|__| \|__|        \|____________|    \|_______|    \|_______|    \|__| \|__|    

*/

const Discord = require('discord.js');
const funcs = require("./funcs.js");
const client = new Discord.Client();

var token = require("./donotopen/tokens.json");

client.on('ready', () => {
    console.log(`Logged in as ${client.user.tag}!`);

    setInterval(funcs.appendUserInfo, 300000);
});

client.on('message', msg => {
    funcs.recordUserInfo(msg);

    if (msg.author.bot) return;

    funcs.isTimedout(msg)

    if (msg.content.toLowerCase().includes("imbot")) {
        funcs.listen(msg, client);
    }


});

client.login(token.token);